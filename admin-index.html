<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="./admin-index.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js"
        integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <aside class="bg-dark">
        <h1 class="fs-3 text-center" style="color: rgb(228, 228, 228);">AdminLTE</h1>
        <hr style="border: 1px solid rgb(236, 236, 236);">
        <ul class="p-0">
            <a href="admin-index.html" class="text-decoration-none"><li class="ps-4 pe-4 fs-5 pt-2 pb-2 mainli"><i class="bi bi-speedometer"></i>&nbsp;&nbsp;Dashboard</li></a>
            <li class="mainul1 fs-5 pt-2">
                <div class="w-100 ps-4 pe-4 pt-2 pb-2 parent d-flex align-items-center justify-content-between">
                    <div><i class="bi bi-file-earmark-plus-fill"></i>&nbsp;&nbsp;Add Data</div><i class="fa-solid fa-chevron-right icon1"></i>
                </div>
                <ul class="p-0 innerul1 m-0">
                    <a href="admin-product.html"><li class="d-flex ps-4 pe-4 pt-2 pb-2 mt-1 mb-1 align-items-center gap-3"><i class="bi bi-circle fs-6"></i>Add Product</li></a>
                </ul>
            </li>
            <li class="mainul2 fs-5 pt-2">
                <div class="w-100 ps-4 pe-4 pt-2 pb-2 parent d-flex align-items-center justify-content-between">
                    <div><i class="bi bi-bar-chart-line-fill"></i>&nbsp;&nbsp;View Data</div><i class="fa-solid fa-chevron-right icon2"></i>
                </div>
                <ul class="p-0 innerul2 m-0">
                    <a href="admin-users.html">
                        <li class="d-flex ps-4 pe-4 pt-2 pb-2 mb-1 mt-1 align-items-center gap-3"><i
                                class="bi bi-circle fs-6"></i>Users</li>
                    </a>
                    <a href="admin-orders.html">
                        <li class="d-flex ps-4 pe-4 pt-2 pb-2 mb-1 mt-1 align-items-center gap-3"><i
                                class="bi bi-circle fs-6"></i>Orders</li>
                    </a>
                </ul>
            </li>
        </ul>
    </aside>
    <section class="main-content">
        <header class="border border-1 border-secondary d-flex align-items-center gap-3 justify-content-start p-3">
            <i class="bi bi-list" style="cursor: pointer;"></i>
            <a href="" class="text-decoration-none text-dark">Home</a>
        </header>
        <section class="s1 mt-5 border-3 w-100">
            <div class="row m-0 d-flex justify-content-evenly align-items-center">
                <div class="cards p-3 bg-primary col-xl-3 col-md-6 shadow">
                    <h1 class="display-6 m-0 mb-2 text-white orders fw-bold"></h1>
                    <p class="text-white fs-5 m-0 mb-2 fw-bold">New Orders</p>
                </div>
                <div class="cards p-3 bg-success col-xl-3 col-md-6 shadow">
                    <h1 class="display-6 m-0 mb-2 text-white brands fw-bold"></h1>
                    <p class="text-white fs-5 m-0 mb-2 fw-bold">Our Brands</p>
                </div>
                <div class="cards p-3 bg-warning col-xl-3 col-md-6 shadow">
                    <h1 class="display-6 m-0 mb-2 text-white fw-bold users-register"></h1>
                    <p class="text-white fs-5 m-0 mb-2 fw-bold">User Registrations</p>
                </div>
                <div class="cards p-3 bg-danger col-xl-3 col-md-6 shadow">
                    <h1 class="display-6 m-0 mb-2 text-white products fw-bold"></h1>
                    <p class="text-white fs-5 m-0 mb-2 fw-bold">Total Products</p>
                </div>
            </div>
        </section>
        <section class="s2 w-100 mt-5">
            <div class="row m-0 d-flex justify-content-evenly align-items-start w-100">
                <div class="col-lg-5 mt-5 shadow p-4">
                    <canvas id="myChart" class="w-100 h-100"></canvas>
                </div>
                <div class="col-lg-6 mt-5 shadow p-4">
                    <canvas id="myChart2" class="w-100 h-100"></canvas>
                </div>
            </div>
        </section>
        <footer class="p-3 mt-5">
            <h1 class="fs-5 m-0 ps-4" style="font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">Copyright
                &copy; 2024 <span class="text-primary">Yash Baapodara</span></h1>
        </footer>
    </section>

</body>
<script>

    $(document).ready(function () {
        $(".bi-list").click(function () {
            $("aside").toggleClass('aside-menu');
            $(".main-content").toggleClass('section-menu');
            $("aside").removeClass("aside-menu1");
            $(".main-content").removeClass('section-menu1');
        });
        $("aside").addClass("aside-menu1");
        $(".main-content").addClass('section-menu1');

        $(".mainul1").click(function(){
            $(".innerul1").slideToggle(300);
            $(".icon1").toggleClass("add-fa-chevron-right");
            $(".innerul2").slideUp(300);
            $(".icon2").removeClass("add-fa-chevron-right");
        });

        $(".mainul2").click(function(){
            $(".innerul2").slideToggle(300);
            $(".icon2").toggleClass("add-fa-chevron-right");
            $(".innerul1").slideUp(300);
            $(".icon1").removeClass("add-fa-chevron-right");
        });

    });

</script>
<script>
    const ctx = document.getElementById('myChart');

    fetch("http://localhost:3000/visitors/")
    .then((res)=>res.json())
    .then((res)=>{
        // console.log(res);
        let count = 0;
        res.forEach((el,i)=>{
            count++;
        });
        localStorage.setItem("user-register",JSON.stringify(count));
        document.querySelector(".users-register").innerHTML = count;
    })
    .catch((err)=>{
        console.log(err);
    })

    fetch("http://localhost:3000/weekProducts/")
    .then((res)=>res.json())
    .then((res)=>{
        // console.log(res);
        let count = 0;
        res.forEach((el,i)=>{
            count++;
        });
        localStorage.setItem("total-products",JSON.stringify(count));
        document.querySelector(".products").innerHTML = count;
    })
    .catch((err)=>{
        console.log(err);
    });

    fetch("http://localhost:3000/users-order/")
    .then((res)=>res.json())
    .then((res)=>{
        // console.log(res);
        if(res.length == 0)
        {
            localStorage.setItem("user-orders",JSON.stringify(0));
            document.querySelector(".orders").innerHTML = 0;
        }
        else
        {
            let count = 0;
            res.forEach((el,i)=>{
                count++;
            });
            localStorage.setItem("user-orders",JSON.stringify(count));
            document.querySelector(".orders").innerHTML = count;
        }
    })
    .catch((err)=>{
        console.log(err);
    });

    fetch("http://localhost:3000/brands/")
    .then((res)=>res.json())
    .then((res)=>{
        // console.log(res);
        if(res.length == 0)
        {
            localStorage.setItem("brands",JSON.stringify(0));
            document.querySelector(".brands").innerHTML = 0;
        }
        else
        {
            let count = 0;
            res.forEach((el,i)=>{
                count++;
            });
            localStorage.setItem("brands",JSON.stringify(count));
            document.querySelector(".brands").innerHTML = count;
        }
    })
    .catch((err)=>{
        console.log(err);
    });

    new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: [
                'New Orders',
                'Our Brands',
                'User Registrations',
                'Total Products'
            ],
            datasets: [{
                data: [JSON.parse(localStorage.getItem("user-orders")), JSON.parse(localStorage.getItem("brands")), JSON.parse(localStorage.getItem("user-register")), JSON.parse(localStorage.getItem("total-products"))],
                backgroundColor: [
                    'rgb(0, 0, 255)',
                    'rgb(0, 120, 0)',
                    'rgb(255, 205, 86)',
                    'rgb(255, 0, 0)'
                ],
                hoverOffset: 4
            }]
        }
    });
</script>
<script>
    const ctx2 = document.getElementById('myChart2');

    new Chart(ctx2, {
        type: 'bar',
        data: {
            labels: ["New Orders", "Our Brands", "User Registrations", "Total Products"],
            datasets: [{
                label: 'Flowchart',
                data: [JSON.parse(localStorage.getItem("user-orders")), JSON.parse(localStorage.getItem("brands")), JSON.parse(localStorage.getItem("user-register")), JSON.parse(localStorage.getItem("total-products"))],
                backgroundColor: [
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 129, 64, 0.2)',
                    'rgba(255, 205, 86, 0.2)',
                    'rgba(255, 99, 132, 0.2)'
                ],
                borderColor: [
                    'rgb(54, 162, 235)',
                    'rgb(255, 159, 64)',
                    'rgb(255, 205, 86)',
                    'rgb(255, 99, 132)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        },
    });
</script>
</html>